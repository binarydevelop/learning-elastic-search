### Inverted Indices

<span style="color:yellow; font-size: 14px"> What happens to the tokens from Analyze process ?</span>
- A couple of different data structures are used to store field values.
The data structure that is used for a field depends on its data type.
The reason Elasticsearch uses more than one data structure, is to ensure efficient data
retrieval for different access patterns.

- One of these data structure is Inverted index. An inverted index is essentially a mapping between terms and which documents contain them. (tokens == terms)

```
TERM      DOCUMENT1   DOCUMENT2  DOCUMENT3

2                          *          *
A          *               *     
hi                         *          *
this       *               *     
Under      *               *          *
Zebra      *                          *
```
\*  represents that this term is present in the document

- The reason the index is called an inverted index is just that a more logical mapping
would be to have a mapping from documents to the terms they contain, i.e. the other
way around.
That doesn’t provide the fast lookups that we need, so that’s why the relationship
is inverted.


- Suppose we have two documents as   
***1st Document***
```JSON
{
    "name": "Coffee Maker",
    "description": "Makes Nice coffee",
    "price": 350,
    "in_stock": 457,
    "created_at": "2021-26-08T11:47:26"
```
***2nd Document***
```JSON
    "name": "Toasterr",
    "description": "Makes Nice toast",
    "price": 750,
    "in_stock": 57,
    "created_at": "2021-26-08T11:47:26"
}
```

- An inverted index is actually created for each text field, meaning that we will have
two inverted indices in this example; one for the “name” field, and one for the
“description” field.

```
                name field
TERM      DOCUMENT1   DOCUMENT2
coffee       *        
maker        * 
toaster                  *

------------------------------------------
            description field
TERM      DOCUMENT1   DOCUMENT2
makes         *          *
nice          *          *
toast         *
coffee                   *

```
- Inverted Indices are used for only text fields and for other data types such as dates and geospatial data BKD trees are used. 